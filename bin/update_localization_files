#!/bin/bash

command -v xgettext.pl >/dev/null 2>&1 || { echo >&2 "xgettext.pl needs to be installed.  It is inlcuded in the perl package Locale::Maketext::Extract. Aborting."; exit 1; }

LOCDIR=$WEBWORK_ROOT/lib/WeBWorK/Localize

cd $LOCDIR

echo "Updating webwork2.pot"

xgettext.pl -o=webwork2.pot -D $WEBWORK_ROOT/lib -D $PG_ROOT

find $WEBWORK_ROOT/lib/WeBWorK/Localize -name '*.po' -exec echo "Updating {}" \; -exec msgmerge -qU {} webwork2.pot \;